/* Patch de compatibilité Safari pour les sélecteurs :has() et fonctions CSS modernes */

/* Remplacement des sélecteurs :has() pour le calendrier */
.calendar-cell {
  height: 2.25rem;
  width: 2.25rem;
  text-align: center;
  font-size: 0.875rem;
  padding: 0;
  position: relative;
}

.calendar-cell.has-selected-range-end {
  border-top-right-radius: 0.375rem;
  border-bottom-right-radius: 0.375rem;
}

.calendar-cell.has-selected-outside {
  background-color: hsl(var(--accent) / 0.5);
}

.calendar-cell.has-selected {
  background-color: hsl(var(--accent));
}

.calendar-cell.has-selected:first-child {
  border-top-left-radius: 0.375rem;
  border-bottom-left-radius: 0.375rem;
}

.calendar-cell.has-selected:last-child {
  border-top-right-radius: 0.375rem;
  border-bottom-right-radius: 0.375rem;
}

.calendar-cell:focus-within {
  position: relative;
  z-index: 20;
}

/* Remplacement des sélecteurs :has() pour les tableaux */
.table-header-has-checkbox {
  padding-right: 0;
}

.table-cell-has-checkbox {
  padding-right: 0;
}

/* Fallback pour les fonctions CSS max() sur Safari < 13.1 */
@supports not (padding: max(0px)) {
  body {
    padding-left: 4px;
    padding-right: 4px;
  }
  
  /* Utilisation de media queries pour les appareils iOS */
  @media screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) {
    body {
      padding-left: 44px;
      padding-right: 44px;
    }
  }
  
  @media screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) {
    body {
      padding-left: 44px;
      padding-right: 44px;
    }
  }
}

/* Support conditionnel - applique seulement si :has() n'est pas supporté */
@supports not (selector(:has(*))) {
  /* Les styles ci-dessus seront appliqués automatiquement */
  .calendar-cell[data-has-selected] {
    background-color: hsl(var(--accent));
  }
  
  .table-header[data-has-checkbox] {
    padding-right: 0;
  }
  
  .table-cell[data-has-checkbox] {
    padding-right: 0;
  }
}